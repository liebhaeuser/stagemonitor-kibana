<div>

  <h3>
    Visualization for trace {{ctrl.trace._source.trace_id}} (<a target="_blank" href="../app/kibana#/discover/Request-Analysis?_g=(time:(from:now-1h,mode:quick,to:now))&_a=(filters:!((meta:(alias:!n,disabled:!f,index:'stagemonitor-spans-*',key:trace_id,negate:!f,value:'{{ctrl.trace._source.trace_id}}'),query:(match:(trace_id:(query:'{{ctrl.trace._source.trace_id}}',type:phrase))))),index:'stagemonitor-spans-*')">show all spans for this trace</a>)
    <small class="pull-right"><a onclick="event.preventDefault(); return false;" href="#/trace/{{ctrl.trace._source.trace_id}}">Permalink</a></small>
  </h3>

  <div class="trace-visualization">

    <div class="pull-right">
      <button>Graph</button>
      <button>Waterfall</button>
    </div>

    <svg id="trace-{{ctrl.trace._source.trace_id}}">
      <g></g>
    </svg>

  </div>

  <span-details selected-span="ctrl.selectedSpan"
                selected-span-properties="ctrl.selectedSpanProperties">
  </span-details>

</div>
